webpackJsonp([21],{"0nAx":function(t,a,i){a=t.exports=i("UTlt")(!0),a.push([t.i,".content-top[data-v-2dd2875a]{background:#fff;margin-top:40px;margin-bottom:20px}.content-bottom[data-v-2dd2875a]{-webkit-box-shadow:0 1px 4px 1px rgba(29,29,39,.15);box-shadow:0 1px 4px 1px rgba(29,29,39,.15);background-color:#fff;padding:10px}","",{version:3,sources:["C:/Users/Administrator/Desktop/project/fs-master/trunk/code/src/pages/controls/violation.vue"],names:[],mappings:"AACA,8BACE,gBAAiB,AACjB,gBAAiB,AACjB,kBAAoB,CACrB,AACD,iCACE,oDAAwD,AAChD,4CAAgD,AACxD,sBAAuB,AACvB,YAAc,CACf",file:"violation.vue",sourcesContent:["\n.content-top[data-v-2dd2875a] {\n  background: #fff;\n  margin-top: 40px;\n  margin-bottom: 20px;\n}\n.content-bottom[data-v-2dd2875a] {\n  -webkit-box-shadow:0 1px 4px 1px rgba(29, 29, 39, 0.15);\n          box-shadow:0 1px 4px 1px rgba(29, 29, 39, 0.15);\n  background-color: #fff;\n  padding: 10px;\n}\n"],sourceRoot:""}])},Wwmh:function(t,a,i){var e=i("0nAx");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i("FIqI")("6b051f56",e,!0,{})},v6Px:function(t,a,i){"use strict";function e(t){i("Wwmh")}Object.defineProperty(a,"__esModule",{value:!0});var o=i("QmSG"),l=i.n(o),n=i("U/9I"),s={name:"device",data:function(){return{msg:"device",arr:[{name:"device",value:"device"}],areaData:"",table:"",popupData:"",Authorization:n.a.getData("token"),violationFormData:{begintime:"",endtime:"",devId:"",driverNumber:"",driverName:"",illegalId:"",carType:""}}},methods:{tableRender:function(t,a){var i=this,e=t.render({id:"violatioin_table",elem:"#violation_device_table",checkbox:!0,url:"http://192.168.8.82:80/carAuditApiTest/api",limit:20,limits:[20,40,50,60,80],where:{type:"LoadViolationList"},even:!0,loading:!0,toolbar:"#violation_table_toolbar",response:{statusCode:200},headers:{Authorization:i.Authorization},cols:[[{type:"checkbox"},{field:"devId",title:"设备编号",style:"color:#f40",width:90},{field:"driverName",title:"车主",width:84},{field:"carType",title:"车型",width:100},{field:"carOwnerMobile",title:"车主手机",width:130},{field:"driverIdNumber",title:"身份证号",width:170},{field:"illegalId",title:"车牌号",width:110},{field:"decisionId",title:"处罚书号",width:100},{field:"createTime",title:"创建时间",width:146},{field:"illegalContent",title:"违规内容",width:90},{field:"illegalLocation",title:"违规地点"},{field:"operate",title:"操作",width:96,templet:function(t){return'<button id="'+t.billId+'" class="layui-btn layui-btn-sm  violation-details"><i class="font14 layui-icon layui-icon-survey"></i>详情</button>'}}]],page:!0,done:function(o){function n(t,a){switch(a){case"01":t.text("大型汽车");break;case"02":t.text("小型汽车")}}$("#search").click(function(t){t.preventDefault(),layer.msg("搜索");var a={type:"LoadViolationList",devId:i.violationFormData.devId,driverNumber:i.violationFormData.driverNumber,carType:i.violationFormData.carType,illegalId:i.violationFormData.illegalId,driverName:i.violationFormData.driverName,starttime:i.violationFormData.start_time,endtime:i.violationFormData.end_time};e.reload({where:a,page:{curr:1}})}),$('td[data-field="DEVSTATE"]').children().each(function(t){var a=$(this).text();$(this).parents("td").siblings('td[data-field="8"]').find(".operate-btn");0==a?$(this).html('<span class="abnormal-btn">禁用</span>'):1==a?$(this).html('<span class="normal-btn">启用</span>'):2==a&&$(this).html('<span class="abnormal-btn">删除</span>')}),$('td[data-field="carType"]').children().each(function(t){var a=$(this).text();n($(this),a)}),a.checkedDefault({gridId:"violatioin_table",fieldName:"billId"}),a.init({gridId:"violatioin_table",filterId:"violation_device_table",fieldName:"billId"}),$(".violation-details").bind("click",function(){var t=$(this).attr("id");i.$router.push({name:"违章管理 / 违章详情",params:{setCode:t}})}),t.on("toolbar(violation_device_table)",function(t){var e=t.event;if("violation_get_data"==e){var o=a.getValue({gridId:"violatioin_table"}),n=o.length;if(console.log(n),n<1)layer.msg("最少选择一条数据");else{for(var s="",r=0;r<n;r++)s+=","+o[r];var v={paramid:s.substring(1)};v=l.a.urlTransition("ExportLoadViolationList",v),i.$http.apiPost("http://192.168.8.82:80/carAuditApiTest/api",v,{responseType:"arraybuffer"}).then(function(t){i.download(t)})}}else"violation_get_all_data"==e&&i.$http.apiPost("http://192.168.8.82:80/carAuditApiTest/api",{type:"ExportLoadViolationList",data:{paramid:""}},{responseType:"arraybuffer"}).then(function(t){i.download(t)})})}})},reset:function(t){t.preventDefault(),this.searchFormData.dev_id="",this.searchFormData.start_time=this.$store.state.dateSel("-")[5],this.searchFormData.end_time=this.$store.state.dateSel("-")[4]},returnF:function(){$("#violation_details_popup").addClass("hide").animate({display:"none",opacity:0},500,function(){$(".content").removeClass("hide").animate({display:"block",opacity:1},500)})},download:function(t){if(t){var a=new Blob([t],{type:"application/octet-stream"}),i=(new Date).getTime(),e="下载资料"+i+".xls",o=window.URL.createObjectURL(a),l=document.createElement("a");l.style.display="none",l.href=o,l.setAttribute("download",e),document.body.appendChild(l),l.click()}}},computed:{},mounted:function(){var t=this;layui.config({base:"./static/layui/extend/tableCheckBoxUtil/"}).use(["form","layer","table","tableCheckBoxUtil"],function(){var a=layui.form,i=layui.table,e=layui.tableCheckBoxUtil;t.table=i,a.on("select(device_status)",function(a){t.addFormData.status=a.value}),a.render(),t.tableRender(t.table,e)}),this.$nextTick(function(){var t=$(".router-link-active > p").attr("name"),a=n.a.getData("userInfo").ROLEID,i={type:"GetMenuBtn",rid:a,mid:t};i=l.a.getUrlTrans(i),this.$http.apiGet("http://192.168.8.82:80/carAuditApiTest/api",i).then(function(t){t.data})})},beforeUpdate:function(){},updated:function(){}},r=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"content"},[i("div",{staticClass:"content-top clearfix"},[t._m(0),t._v(" "),i("form",{staticClass:"layui-form layui-form-pane fl pl20",attrs:{action:""}},[i("div",{staticClass:"layui-form-item"},[i("label",{staticClass:"layui-form-label"},[t._v("设备编号")]),t._v(" "),i("div",{staticClass:"layui-inline mr0"},[i("div",{staticClass:"layui-input-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.violationFormData.devId,expression:"violationFormData.devId"}],staticClass:"layui-input",attrs:{type:"text",id:"violation_dev_id",name:"date",autocomplete:"off",placeholder:"输入设备编号"},domProps:{value:t.violationFormData.devId},on:{input:function(a){a.target.composing||t.$set(t.violationFormData,"devId",a.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"layui-form-item"},[i("label",{staticClass:"layui-form-label"},[t._v("身份证号")]),t._v(" "),i("div",{staticClass:"layui-inline mr0"},[i("div",{staticClass:"layui-input-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.violationFormData.driverNumber,expression:"violationFormData.driverNumber"}],staticClass:"layui-input",attrs:{type:"text",id:"violation_drivingLicenseno",placeholder:"输入身份证号",name:"date",autocomplete:"off"},domProps:{value:t.violationFormData.driverNumber},on:{input:function(a){a.target.composing||t.$set(t.violationFormData,"driverNumber",a.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"layui-form-item"},[i("label",{staticClass:"layui-form-label"},[t._v("车主姓名")]),t._v(" "),i("div",{staticClass:"layui-inline mr0"},[i("div",{staticClass:"layui-input-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.violationFormData.driverName,expression:"violationFormData.driverName"}],staticClass:"layui-input",attrs:{type:"text",id:"violation_drivingLicenseno",placeholder:"输入车主姓名",name:"date",autocomplete:"off"},domProps:{value:t.violationFormData.driverName},on:{input:function(a){a.target.composing||t.$set(t.violationFormData,"driverName",a.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"layui-form-item"},[i("label",{staticClass:"layui-form-label"},[t._v("车牌号码")]),t._v(" "),i("div",{staticClass:"layui-inline mr0"},[i("div",{staticClass:"layui-input-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.violationFormData.illegalId,expression:"violationFormData.illegalId"}],staticClass:"layui-input",attrs:{type:"text",placeholder:"输入车牌号",name:"date",autocomplete:"off"},domProps:{value:t.violationFormData.illegalId},on:{input:function(a){a.target.composing||t.$set(t.violationFormData,"illegalId",a.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"layui-form-item"},[i("label",{staticClass:"layui-form-label",attrs:{for:""}},[t._v("车辆类型")]),t._v(" "),i("div",{staticClass:"layui-input-inline"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.violationFormData.carType,expression:"violationFormData.carType"}],attrs:{name:"",id:""},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.violationFormData,"carType",a.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v("全部")]),t._v(" "),i("option",{attrs:{value:"01"}},[t._v("大型汽车")]),t._v(" "),i("option",{attrs:{value:"02"}},[t._v("小型汽车")]),t._v(" "),i("option",{attrs:{value:"03"}},[t._v("使馆汽车")]),t._v(" "),i("option",{attrs:{value:"04"}},[t._v("领馆汽车")]),t._v(" "),i("option",{attrs:{value:"05"}},[t._v("境外汽车")]),t._v(" "),i("option",{attrs:{value:"06"}},[t._v("外籍汽车")]),t._v(" "),i("option",{attrs:{value:"07"}},[t._v("普通摩托车")]),t._v(" "),i("option",{attrs:{value:"08"}},[t._v("轻便摩托车")]),t._v(" "),i("option",{attrs:{value:"09"}},[t._v("使馆摩托车")]),t._v(" "),i("option",{attrs:{value:"10"}},[t._v("领馆摩托车")]),t._v(" "),i("option",{attrs:{value:"11"}},[t._v("境外摩托车")]),t._v(" "),i("option",{attrs:{value:"12"}},[t._v("外籍摩托车")]),t._v(" "),i("option",{attrs:{value:"13"}},[t._v("低速车")]),t._v(" "),i("option",{attrs:{value:"14"}},[t._v("拖拉机")]),t._v(" "),i("option",{attrs:{value:"15"}},[t._v("挂车")]),t._v(" "),i("option",{attrs:{value:"16"}},[t._v("教练汽车")]),t._v(" "),i("option",{attrs:{value:"17"}},[t._v("教练摩托车")]),t._v(" "),i("option",{attrs:{value:"18"}},[t._v("试验汽车")]),t._v(" "),i("option",{attrs:{value:"19"}},[t._v("试验摩托车")]),t._v(" "),i("option",{attrs:{value:"20"}},[t._v("临时入境汽车")]),t._v(" "),i("option",{attrs:{value:"21"}},[t._v("临时入境摩托车")]),t._v(" "),i("option",{attrs:{value:"22"}},[t._v("临时行驶车")]),t._v(" "),i("option",{attrs:{value:"23"}},[t._v("警用汽车")]),t._v(" "),i("option",{attrs:{value:"24"}},[t._v("警用摩托")]),t._v(" "),i("option",{attrs:{value:"25"}},[t._v("原农机号牌")]),t._v(" "),i("option",{attrs:{value:"26"}},[t._v("香港入出境车")]),t._v(" "),i("option",{attrs:{value:"27"}},[t._v("澳门入出境车")]),t._v(" "),i("option",{attrs:{value:"31"}},[t._v("武警号牌")]),t._v(" "),i("option",{attrs:{value:"32"}},[t._v("军队号牌")]),t._v(" "),i("option",{attrs:{value:"99"}},[t._v("其他号牌")])])])]),t._v(" "),i("div",{staticClass:"d_i_b"},[i("div",{staticClass:"layui-form-item"},[i("label",{staticClass:"layui-form-label"},[t._v("创建时间")]),t._v(" "),i("div",{staticClass:"layui-inline mr0"},[i("div",{staticClass:"layui-input-inline "},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.violationFormData.begintime,expression:"violationFormData.begintime"}],staticClass:"layui-input",attrs:{type:"text",name:"date",id:"violation_start_date"},domProps:{value:t.violationFormData.begintime},on:{input:function(a){a.target.composing||t.$set(t.violationFormData,"begintime",a.target.value)}}})])])]),t._v(" "),i("pre",{staticClass:"d_i_b mt8 "},[t._v("至")]),t._v(" "),i("div",{staticClass:"layui-form-item"},[i("div",{staticClass:"layui-inline"},[i("div",{staticClass:"layui-input-inline"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.violationFormData.endtime,expression:"violationFormData.endtime"}],staticClass:"layui-input",attrs:{type:"text",id:"violation_end_date",name:"date",autocomplete:"off"},domProps:{value:t.violationFormData.endtime},on:{input:function(a){a.target.composing||t.$set(t.violationFormData,"endtime",a.target.value)}}})])])])]),t._v(" "),t._m(1),t._v(" "),i("button",{staticClass:"layui-btn layui-btn-sm layui-btn-primary vt",on:{click:function(a){return t.reset(a)}}},[i("i",{staticClass:"layui-icon"},[t._v("")]),t._v("重置")])])]),t._v(" "),t._m(2)])])},v=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"current-page"},[i("p",[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("违章管理")])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("button",{staticClass:"layui-btn layui-btn-sm vt",attrs:{id:"search"}},[i("i",{staticClass:"layui-icon"},[t._v("")]),t._v("搜索")])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"content-bottom"},[i("table",{staticClass:"layui-hide",attrs:{"lay-filter":"violation_device_table",id:"violation_device_table"}}),t._v(" "),i("script",{attrs:{type:"text/html",id:"violation_table_toolbar"}},[t._v('\n          <div class="layui-btn-container">\n            <button class="layui-btn layui-btn-sm" lay-event="violation_get_data"><i class="layui-icon">&#xe609</i>导出选择</button>\n            <button class="layui-btn layui-btn-sm" lay-event="violation_get_all_data"><i class="iconfont icon-daochu"></i>导出全部</button>\n            <p class="col-red font14">提示：点击表格右侧详情按钮查看该违章详情信息</p>\n          </div>\n      ')])])}],d={render:r,staticRenderFns:v},u=d,c=i("C7Lr"),m=e,p=c(s,u,!1,m,"data-v-2dd2875a",null);a.default=p.exports}});